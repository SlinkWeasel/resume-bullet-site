<script>
    async function generateBulletPoints() {
        const jobTitle = document.getElementById("jobTitle").value;
        const industry = document.getElementById("industry").value;
        const outputBox = document.getElementById("output");

        // Clear previous bullet points and show loading state
        outputBox.value = "Generating...";

        // Validate input fields
        if (!jobTitle || !industry) {
            outputBox.value = "Please enter both job title and industry.";
            return;
        }

        try {
            const response = await fetch("/.netlify/functions/generate-bullets", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ jobTitle, industry })
            });

            if (response.ok) {
                const data = await response.json();
                console.log("Bullet Points Response:", data); // Debugging

                // Ensure the data is formatted correctly
                if (!data.bullet_points || !Array.isArray(data.bullet_points)) {
                    throw new Error("Invalid bullet point format");
                }

                // Display bullet points in the output box
                outputBox.value = data.bullet_points.join("\n");
            } else {
                throw new Error("Failed to fetch bullet points");
            }

        } catch (error) {
            console.error("Error:", error);
            outputBox.value = "Failed to generate bullet points. Try again.";
        }
    }
</script>
